# YOLOv5

## 关闭wandb

第一处：utils/loggers/wandb/wandb_utils.py

```
# try:
#     import wandb
# 
#     assert hasattr(wandb, '__version__')  # verify package import not local dir
# except (ImportError, AssertionError):
#     wandb = None
# 添加以下语句
wandb = None

```

第二处：utils/loggers/ __init __.py

```
# try:
#     import wandb
# 
#     assert hasattr(wandb, '__version__')  # verify package import not local dir
#     if pkg.parse_version(wandb.__version__) >= pkg.parse_version('0.12.2') and RANK in {0, -1}:
#         try:
#             wandb_login_success = wandb.login(timeout=30)
#         except wandb.errors.UsageError:  # known non-TTY terminal issue
#             wandb_login_success = False
#         if not wandb_login_success:
#             wandb = None
# except (ImportError, AssertionError):
#     wandb = None
# 添加以下语句
wandb = None

```


# YOLOv7

## windows

### yolov7训练时UnicodeDecodeError: 'gbk' codec can't decode byte 0x80 in position 234: illegal multibyte sequence

```
# ctrl+F搜索 with open在括号里面加上 encoding=‘utf-8’

with open(cfg,encoding='utf-8') as f:
    self.yaml = yaml.load(f, Loader=yaml.SafeLoader)  # model dict
```

### KeyError: 'nc'

错误为缺少关键字，无法找到nc关键字。打印一下，看看是否存在该关键字。原因是有时关键字可能有修改。

### KeyError: 'assets'

自己下载yolov7.py，网址如下：

GitHub - WongKinYiu/yolov7: Implementation of paper - YOLOv7: Trainable bag-of-freebies sets new state-of-the-art for real-time object detectors)

修改train中的weights。

### wandb: Install Weights & Biases for YOLOR logging with 'pip install wandb' (recommended)

```
pip install wandb
wandb init
# 打开返回的网址复制key，然后选择wandb
```

wandb可以可视化训练过程中的状态

### _pickle.UnpicklingError: STACK_GLOBAL requires str

**产生原因** ：在过去对当前数据集进行过训练，导致在数据集文件夹中生成了.cache的缓存文件。

**解决方法**：找到数据集文件夹中的全部.cache文件，并将他们全部删除。注意：.cache文件也有可能在数据集的images和labels文件夹中，要注意仔细查找。

如果是在Linux下操作可以尝试如下命令 ：

```
cd 数据集文件夹
rm *.cache
```

批量删除全部缓存文件。

### Class labels must be a dictionary of numbers to string

由于wandb更新导致，[官方解决方案](https://github.com/ultralytics/yolov5/issues/9194)是要更新代码，也可以通过关闭wandb解决。

文件utils/wandb_loggings/wandb_utils.py

```
# try:
#     import wandb
# 
#     assert hasattr(wandb, '__version__')  # verify package import not local dir
# except (ImportError, AssertionError):
#     wandb = None
# 添加以下语句
wandb = None
```

## Linux
