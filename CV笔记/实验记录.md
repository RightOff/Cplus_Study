# 注意事项：

train：指的是ultralytics-main(old)

代码包2指的是ultralytics-main

代码包3指的是ultralytics-main（3）

# v5s训练myfiredataset数据集

## yolov5

### v5s baseline

exp40

![1690616532965](image/实验记录/1690616532965.png)![1690616542817](image/实验记录/1690616542817.png)

### 加注意力机制

#### s+CoordAtt

map50提升0.8%（exp41）

200轮后过拟合

![1690616645033](image/实验记录/1690616645033.png)

![1690616657789](image/实验记录/1690616657789.png)

### 改IOU

#### EIoU

map50提升0.2%（exp48）

![1690892343926](image/实验记录/1690892343926.png)

![1690892340073](image/实验记录/1690892340073.png)

#### WIoU

map50提升0.4%（exp51）

200轮后过拟合

![1690892565506](image/实验记录/1690892565506.png)

![1690892582545](image/实验记录/1690892582545.png)

### 改Head

#### GFPN替换Head

map50提升0.5%（exp54）

200轮后过拟合

![1691071210101](image/实验记录/1691071210101.png)

![1691071295943](image/实验记录/1691071295943.png)

### 改残差

#### C2f

map50提升0.3%（exp55）

收敛正常

![1691212480851](image/实验记录/1691212480851.png)

![1691212492557](image/实验记录/1691212492557.png)

# RTDETR

## synthetic fire-smoke.v17i数据集

### rtdetr-l

#### 无预训练权重baseline

20231219

结果保存文件：exp

map50：0.88。

![1703035471629](image/实验记录/1703035471629.png)

![1703035482387](image/实验记录/1703035482387.png)

### rtdetr-r34

#### 无预训练权重baseline

20231220

结果保存文件：exp3

map50：0.879。

![1703060910637](image/实验记录/1703060910637.png)

![1703060918822](image/实验记录/1703060918822.png)

### rtdetr-r18

#### 无预训练权重baseline

##### 实验一

20231220

结果保存文件：exp2

map50：0.878。

![1703046039877](image/实验记录/1703046039877.png)

![1703046161534](image/实验记录/1703046161534.png)

##### 实验二

测试集，保存文件：val_exp，map50：0.877，batch=16，GPU1

![1703566107509](image/实验记录/1703566107509.png)

训练时结果保存文件：exp5（训练日期：20231226）

rtdetr-r18，GIOU，batch=8，GPU0

验证集，map50：0.891，最好结果在192轮。

![1703554670920](image/实验记录/1703554670920.png)

![1703554754891](image/实验记录/1703554754891.png)

##### 实验三

测试集，保存文件：val_exp4，map50：0.882，batch=16，GPU1

![1703573566195](image/实验记录/1703573566195.png)

结果保存文件：exp7（训练日期：20231226）

rtdetr-r18，GIOU，batch=8，GPU1

map50：0.892，最好结果在204轮。有点过拟合

![1703573355588](image/实验记录/1703573355588.png)

![1703573513523](image/实验记录/1703573513523.png)

##### 实验四

测试集，保存文件：val_exp6，map50：0.877，batch=16，GPU1

训练时结果保存文件：exp9（训练日期：20231227）

rtdetr-r18，GIOU，batch=8，GPU1，200epoch，50早停

验证集，map50：0.891，最好结果在150轮。

![1703641734215](image/实验记录/1703641734215.png)

#### +DAttention

AIFI换成DAttention

##### 实验一

测试集，保存文件：val_exp2，map50：0.88，batch=16，GPU1

![1703566552693](image/实验记录/1703566552693.png)

训练时结果保存文件：exp4（训练日期：20231225）

rtdetr-AIFI-DAttention，GIOU，batch=8，GPU1

验证集，map50：0.89，最好结果在166轮。

![1703511281750](image/实验记录/1703511281750.png)

![1703574034759](image/实验记录/1703574034759.png)

#### +LPE

使用LearnedPositionalEncoding改进AIFI中的位置编码生成

##### 实验一

测试集，保存文件：val_exp3，map50：0.875，batch=16，GPU1

![1703566787653](image/实验记录/1703566787653.png)

训练时结果保存文件：exp6（训练日期：20231226）

rtdetr-AIFI-LPE，GIOU，batch=8，GPU1

验证集，map50：0.887，最好结果在196轮。

![1703555431393](image/实验记录/1703555431393.png)

#### +ASF

测试集，保存文件：val_exp5，map50：0.877，batch=16，GPU1

训练时结果保存文件：exp8（训练日期：20231226）

rtdetr-ASF，GIOU，batch=8，GPU1

验证集，map50：0.888，最好结果在182轮。

![1703594998645](image/实验记录/1703594998645.png)

# YOLOv8n

## synthetic fire-smoke.v17i数据集

### baseline

#### 有预训练baseline

##### 实验一

20230925

结果保存文件：train9

map50：0.86，相较于无预训练降低了0.6%

![1695605938016](image/实验记录/1695605938016.png)

无法收敛

![1695605998994](image/实验记录/1695605998994.png)

##### 实验二

结果保存文件：(魔)train4（训练日期：20231223）

yolov8n，CIOU，batch=32，GPU1

map50：0.864，最好结果在91轮。

![1703400197102](image/实验记录/1703400197102.png)

![1703400165530](image/实验记录/1703400165530.png)

##### 实验三

结果保存文件：代码包二train19（训练日期：20231225）

yolov8n，CIOU，batch=32，GPU0，GPU1，默认超参

map50：0.866，最好结果在131轮。

![1703486168955](image/实验记录/1703486168955.png)

#### 无预训练baseline

##### 实验一

网络模型图：

20230925

结果保存文件：train8

map50：0.866，相较于有预训练提升了0.6%。

![1695606080150](image/实验记录/1695606080150.png)

收敛

![1695606091152](image/实验记录/1695606091152.png)

##### 实验二（魔最新结果）

测试集，保存文件：(魔)v8_val_exp，map50：0.877，batch=16，GPU1

![1703567620249](image/实验记录/1703567620249.png)

结果保存文件：(魔)train8（训练日期：20231223）

yolov8n，CIOU，batch=32，GPU0，默认超参。

map50：0.875，最好结果在250轮。

![1703486382679](image/实验记录/1703486382679.png)

~~实验三（需要默认超参实验五）~~（直接看实验五）

~~结果保存文件：train26（训练日期：20231223）~~

~~yolov8n，CIOU，batch=32，GPU0~~

~~map50：0.86，最好结果在226轮。~~

##### 实验四（最新结果）

结果保存文件：代码包2train18（训练日期：20231223）

yolov8n，CIOU，batch=32，GPU1，默认超参

map50：0.875，最好结果在250轮。

![1703477278113](image/实验记录/1703477278113.png)

##### ~~实验五~~

~~结果保存文件：train27（训练日期：20231223）~~

~~yolov8n，CIOU，batch=32，GPU0，默认超参default~~

~~map50：0.866，最好结果在177轮。~~

![1703429137145](image/实验记录/1703429137145.png)

测试集

![1703588126427](image/实验记录/1703588126427.png)

v8图

![1695358478991](https://file+.vscode-resource.vscode-cdn.net/d%3A/code/%E7%AC%94%E8%AE%B0/CV%E7%AC%94%E8%AE%B0/image/%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/1695358478991.png)

### 注意力

#### +GAM_Attention

![1695358539460](https://file+.vscode-resource.vscode-cdn.net/d%3A/code/%E7%AC%94%E8%AE%B0/CV%E7%AC%94%E8%AE%B0/image/%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/1695358539460.png)

##### 第一次实验

结果保存文件：train10（日期：20230925）

200轮

map50：0.868，相较于有训练baseline提升0.8%，相较于无训练baseline提升0.2%。

![1695611915466](image/实验记录/1695611915466.png)

![1695612076057](image/实验记录/1695612076057.png)

##### 第二次实验

结果保存文件：train11（日期：20230925）

300轮

map50：0.868，与第一次实验总map50相同，fire的map50有0.5%提升，smoke的map50有0.3%下降，相较于有训练baseline提升0.8%，相较于无训练baseline提升0.2%。

![1695617395940](image/实验记录/1695617395940.png)

#### +CoordAtt

##### 实验一

结果保存文件：(魔)train3（训练日期：20231223）

CoordAtt，CIOU，batch=32，GPU1

map50：0.87，最好结果在225轮。

![1703393248900](image/实验记录/1703393248900.png)

### DAttention

#### 实验一

结果保存文件：（魔）train10（训练日期：20231228）

DAttention.yaml，fixed_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.868，最好结果在187轮。

![1703728999519](image/实验记录/1703728999519.png)

### small object

#### small object

##### 实验一

结果保存文件：train12（日期：20230925）

300轮

map50：0.877，相较于有训练baseline提升1.7%，相较于无训练baseline提升1.1%。

![1695633708451](image/实验记录/1695633708451.png)

![1695633718515](image/实验记录/1695633718515.png)

##### 实验二

结果保存文件：(魔)train9（训练日期：20231225）

self_small_Object，CIOU，batch=32，GPU0、1

map50：0.879，最好结果在131轮。

![1703486648084](image/实验记录/1703486648084.png)

#### small object + augment

结果保存文件：train22（日期：20231020）

300轮，221轮终止

map50：0.874，相较于单独small object 降低 0.3%。

![1697809657918](image/实验记录/1697809657918.png)

![1697809683681](image/实验记录/1697809683681.png)

#### small object + GAM_Attention

结果保存文件：train13（日期：20230925）

300轮

map50：0.872，相较于有训练baseline提升1.2%，相较于无训练baseline提升0.6%，相较于单独的small object 降低0.5%。因而small object网络与GAM结合有负面影响。

![1695650584527](image/实验记录/1695650584527.png)

![1695650598938](image/实验记录/1695650598938.png)

#### small object + WIoU

结果保存文件：train14（日期：20230926）

300轮，187轮终止

map50：0.876，相较于有训练baseline提升1.6%，相较于无训练baseline提升1.0%，相较于单独的small object 降低0.1%。因而small object网络与GAM结合有负面影响。

![1695693157793](image/实验记录/1695693157793.png)

![1695693420194](image/实验记录/1695693420194.png)

#### small object + Inner CIOU

##### 实验一

结果保存文件：代码包2train13（训练日期：20231207）

ratio=1.1，tal中为CIOU，180轮终止。

map50：0.884，相较于无训练baseline提高1.8%。

![1701950168865](image/实验记录/1701950168865.png)

##### 实验二

结果保存文件：代码包3train6（训练日期：20231208）

ratio=0.95，tal中为CIOU，241轮终止。

map50：0.881。

![1702035881179](image/实验记录/1702035881179.png)

#### +CA+Inner CIOU+small object

##### 实验一

结果保存文件：(魔)train（训练日期：20231223）

self_small_Object_CoordAtt，CIOU，ratio=1.1，batch=32，GPU1

map50：0.875，最好结果在226轮。

![1703384321619](image/实验记录/1703384321619.png)

##### 实验二

结果保存文件：(魔)train2（训练日期：20231223）

self_small_Object_CoordAtt，CIOU，ratio=0.95，batch=32，GPU1

map50：0.876，最好结果在142轮。

![1703393132409](image/实验记录/1703393132409.png)

##### 实验三

结果保存文件：(魔)train5（训练日期：20231223）

self_small_Object_CoordAtt，CIOU，ratio=0.9，batch=32，GPU1

map50：0.877，最好结果在166轮。

![1703400423868](image/实验记录/1703400423868.png)

##### 实验三

结果保存文件：(魔)train7（训练日期：20231223）

self_small_Object_CoordAtt，CIOU，ratio=0.85，batch=32，GPU0

map50：0.872，最好结果在252轮。

![1703412567199](image/实验记录/1703412567199.png)

### IOU

#### WIoU

结果保存文件：train15（日期：20230926）

300轮，tal中为CIOU（不能同时在loss和tal两个地方同时用WIOU）

map50：0.87，相较于有训练baseline提升1.0%，相较于无训练baseline提升0.4%。

![1695737685191](image/实验记录/1695737685191.png)

![1695737699314](image/实验记录/1695737699314.png)

#### EIOU

##### 第一次实验

结果保存文件：train16（日期：20230927）

300轮，tal中为CIOU

map50：0.866，相较于有训练baseline提升0.6%，相较于无训练baseline无提升。

![1695791174498](image/实验记录/1695791174498.png)

![1695791451639](image/实验记录/1695791451639.png)

##### 第二次实验

结果保存文件：train19（日期：20231002）

300轮，tal中为EIOU

map50：0.863，实验无意义。

![1696256355392](image/实验记录/1696256355392.png)

![1696256378163](image/实验记录/1696256378163.png)

#### SIOU

##### 第一次实验

结果保存文件：train18（日期：20230928）

300轮 ，tal中为CIOU

map50：0.864，相较于第一次实验fire的map提升1.3%，smoke降低1.4%。

![1695884824570](image/实验记录/1695884824570.png)

##### 第二次实验

结果保存文件：train17（日期：20230928）

300轮 ，tal中也为SIOU

map50：0.865，相较于有训练baseline提升0.5%，相较于无训练baseline降低0.1%。

![1695866728949](image/实验记录/1695866728949.png)

![1695866897909](image/实验记录/1695866897909.png)

#### GIOU

|            |   GIOU   | InnerGIOU(1.15) | InnerGIOU(1.1) | InnerGIOU(1.2) | InnerGIOU(1.25) |
| :--------: | :------: | :-------------: | :------------: | :------------: | :-------------: |
|   map50   |  0.872  |      0.871      |     0.868     |      0.87      |      0.866      |
|    tal    |   CIOU   |      GIOU      |      CIOU      |      CIOU      |      CIOU      |
| epoch(50p) |   244   |       246       |      257      |      231      |       230       |
|    save    | train21 |  代码包2train  | 代码包2train3 | 代码包2train4 |  代码包2train5  |
|    date    | 20231003 |    20231124    |    20231125    |    20231126    |    20231126    |

结果保存文件：train21（日期：20231003）

244轮 ，tal中为CIOU

map50：0.872，相较于有训练baseline提升1.2%，相较于无训练baseline提高0.6%。

![1696331005006](image/实验记录/1696331005006.png)

![1696331013759](image/实验记录/1696331013759.png)

#### Inner GIOU

##### 实验一

结果保存文件：代码包2train（训练日期：20231124）

ratio=1.15，tal中为GIOU，246轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1700902327230](image/实验记录/1700902327230.png)

![1700901664756](image/实验记录/1700901664756.png)

##### 实验二

结果保存文件：代码包2train2（训练日期：20231125）

ratio=1.15，tal中为CIOU，214轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1700910303177](image/实验记录/1700910303177.png)

![1700910370063](image/实验记录/1700910370063.png)

##### 实验三

结果保存文件：代码包2train3（训练日期：20231125）

ratio=1.1，tal中为CIOU，257轮终止

map50：0.868，相较于无训练baseline提高0.2%。

![1700965278354](image/实验记录/1700965278354.png)

![1700966054064](image/实验记录/1700966054064.png)

##### 实验四

结果保存文件：代码包2train4（训练日期：20231126）

ratio=1.2，tal中为CIOU，231轮终止

map50：0.87，相较于无训练baseline提高0.4%。

![1700979700165](image/实验记录/1700979700165.png)

![1700979764662](image/实验记录/1700979764662.png)

##### 实验五

结果保存文件：代码包2train5（训练日期：20231126）

ratio=1.25，tal中为CIOU，230轮终止

map50：0.866，相较于无训练baseline无提高。

![1700989753052](image/实验记录/1700989753052.png)

略

#### DIOU

|            |   DIOU   | InnerDIOU(1.15) | InnerDIOU(1.2) | InnerDIOU(1.25) | InnerDIOU(1.1) | InnerDIOU(1.05) |
| :--------: | :------: | :-------------: | :------------: | :-------------: | -------------- | --------------- |
|   map50   |  0.869  |      0.871      |     0.866     |      0.868      | 0.872          | 0.868           |
|    tal    |   DIOU   |      DIOU      |      DIOU      |      DIOU      | DIOU           | DIOU            |
| epoch(50p) |   207   |       230       |      277      |       235       | 286            | 250             |
|    save    | train20 |  代码包2train6  | 代码包2train9 |  代码包2train7  | 代码包2train10 | 代码包2train8   |
|    date    | 20231003 |    20231127    |    20231127    |    20231127    | 20231127       | 20231127        |

结果保存文件：train20（日期：20231003）

207轮 ，tal中为CIOU

map50：0.869，相较于有训练baseline提升0.9%，相较于无训练baseline提高0.3%。

![1696298900044](image/实验记录/1696298900044.png)

![1696298915982](image/实验记录/1696298915982.png)

#### Inner DIOU

##### 实验一

结果保存文件：代码包2train6（训练日期：20231127）

ratio=1.15，tal中为DIOU，230轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1701052781111](image/实验记录/1701052781111.png)

略

##### 实验二

![1701068327825](image/实验记录/1701068327825.png)

略

##### 实验三

结果保存文件：代码包2train7（训练日期：20231127）

ratio=1.25，tal中为DIOU，235轮终止。

map50：0.868，相较于无训练baseline提高0.2%。

![1701056009257](image/实验记录/1701056009257.png)

略

##### 实验四

结果保存文件：代码包2train10（训练日期：20231127）

ratio=1.1，tal中为DIOU，286轮终止

map50：0.872，相较于无训练baseline提高0.6%。

![1701155195249](image/实验记录/1701155195249.png)

略

##### 实验五

结果保存文件：代码包2train8（训练日期：20231127）

ratio=1.05，tal中为DIOU，250轮终止。

map50：0.868，相较于无训练baseline提高0.2%。

![1701059154093](image/实验记录/1701059154093.png)

略

#### Inner CIOU

|            |  CIOU  | InnerCIOU(1.15) | InnerCIOU(1.2) | InnerCIOU(1.25) | InnerCIOU(1.1) | InnerCIOU(1.05) | InnerCIOU(0.9) | InnerCIOU(0.8) | InnerCIOU(0.95) |
| :--------: | :----: | :-------------: | :------------: | :-------------: | -------------- | --------------- | -------------- | -------------- | --------------- |
|   map50   | 0.866 |      0.874      |     0.872     |      0.87      | 0.874          | 0.871           | 0.872          | 0.867          | 0.875           |
|    tal    |  CIOU  |      CIOU      |      CIOU      |      CIOU      | CIOU           | CIOU            | CIOU           | CIOU           | CIOU            |
| epoch(50p) |  缺失  |       275       |      181      |       181       | 254            | 181             | 239            | 241            | 237             |
|    save    | train8 |  代码包3train2  | 代码包3train3 | 代码包2train14 | 代码包2train12 | 代码包3train4   | 代码包3train6  | 代码包2train15 | 代码包3train5   |
|    date    |  基线  |    20231206    |    20231207    |    20231208    | 20231207       | 20231207        | 20231208       | 20231208       | 20231208        |

##### 实验一

结果保存文件：代码包2train11（训练日期：20231206）

ratio=1.15，tal中为CIOU，275轮终止。

map50：0.874，相较于无训练baseline提高0.8%。

代码包3train2(最好)

![1701868284336](image/实验记录/1701868284336.png)

代码包2train11（一般情况）

![1701868320285](image/实验记录/1701868320285.png)

##### 实验二

结果保存文件：代码包3train3（训练日期：20231207）

ratio=1.2，tal中为，181轮终止。

map50：0.872，相较于无训练baseline提高0.6%。

![1701929207067](image/实验记录/1701929207067.png)

##### 实验三

结果保存文件：代码包2train12（训练日期：20231207）

ratio=1.1，tal中为CIOU，轮终止。

map50：，相较于无训练baseline提高%。

![1701934734266](image/实验记录/1701934734266.png)

##### 实验四

结果保存文件：代码包3train4（训练日期：20231207）

ratio=1.1

![1701996671257](image/实验记录/1701996671257.png)

##### 实验五

结果保存文件：代码包2train14（训练日期：20231208）

ratio=1.25

![1702003076647](image/实验记录/1702003076647.png)

##### 实验六

结果保存文件：代码包3train5（训练日期：20231208）

ratio=0.9

![1702009191885](image/实验记录/1702009191885.png)

##### 实验七

结果保存文件：代码包2train15（训练日期：20231208）

ratio=0.8

![1702013670601](image/实验记录/1702013670601.png)

##### 实验八

结果保存文件：代码包3train5（训练日期：20231208）

ratio=0.95

![1702019911715](image/实验记录/1702019911715.png)

### RTDETR

#### +Head

结果保存文件：exp（训练日期：20231220）

yolov8-detr-p2

map50：0.872

![1703073736184](image/实验记录/1703073736184.png)

![1703073746593](image/实验记录/1703073746593.png)

#### +Head+小目标检测层

##### 实验一

结果保存文件：exp2（训练日期：20231220）

yolov8-detr-p2

map50：0.874，50轮早停

![1703123909414](image/实验记录/1703123909414.png)

![1703128845547](image/实验记录/1703128845547.png)

##### 实验二

结果保存文件：exp3（训练日期：20231221）

yolov8-detr-p2-self

map50：0.883，最好结果在258轮。

![1703140471129](image/实验记录/1703140471129.png)

![1703140479075](image/实验记录/1703140479075.png)

#### +Head+小目标检测层+Inner

|            |  CIOU  | InnerCIOU(0.8) | InnerCIOU(0.9) | InnerCIOU(0.95) | InnerCIOU(1.1) | InnerCIOU(1.2) | InnerCIOU(1.4) | InnerCIOU(1.5) | InnerCIOU(0.95) |
| :---------: | :----: | :------------: | :------------: | :-------------: | :------------: | -------------- | -------------- | -------------- | --------------- |
|    map50    | 0.866 |                |     0.874     |      0.872      |     0.877     | 0.876          | 0.883          | 0.881          |                 |
|     tal     |  CIOU  |      CIOU      |      CIOU      |      CIOU      |      CIOU      | CIOU           | CIOU           | CIOU           | CIOU            |
| epoch(best) |  缺失  |                |      311      |       191       |      215      | 222            | 238            | 311            |                 |
|    batch    |        |                |       32       |       32       |       32       | 32             | 16             | 32             |                 |
|    save    | train8 |                |   代码包2exp   |      exp4      |      exp5      | exp6           | 代码包2exp2    | exp7           |                 |
|    date    |  基线  |                |    20231222    |    20231221    |    20231221    | 20231222       | 20231223       | 20231222       |                 |

##### 实验一

##### 实验一

结果保存文件：exp4（训练日期：20231221）

yolov8-detr-p2-self，CIOU，ratio=0.95

map50：0.872，最好结果在191轮。

![1703154556185](image/实验记录/1703154556185.png)

![1703154566296](image/实验记录/1703154566296.png)

##### 实验二

结果保存文件：exp5（训练日期：20231221）

yolov8-detr-p2-self，CIOU，ratio=1.1

map50：0.877，最好结果在215轮。

![1703168522769](image/实验记录/1703168522769.png)

##### 实验三

结果保存文件：exp6（训练日期：20231222）

yolov8-detr-p2-self，CIOU，ratio=1.2

map50：0.876，最好结果在222轮。

![1703211511642](image/实验记录/1703211511642.png)

##### 实验四

结果保存文件：exp7（训练日期：20231222）

yolov8-detr-p2-self，CIOU，ratio=1.5

map50：0.881，最好结果在311轮。

![1703232198722](image/实验记录/1703232198722.png)

##### 实验五

结果保存文件：代码包2exp（训练日期：20231222）

yolov8-detr-p2-self，CIOU，ratio=0.9

map50：0.874，最好结果在311轮。

![1703296208080](image/实验记录/1703296208080.png)

##### 实验六

结果保存文件：exp8（训练日期：20231223）

yolov8-detr-p2-self，CIOU，ratio=1.4，batch=8，GPU1

map50：0.879，最好结果在235轮。

![1703333165608](image/实验记录/1703333165608.png)

##### 实验七

结果保存文件：代码包2exp2（训练日期：20231223）

yolov8-detr-p2-self，CIOU，ratio=1.4，batch=16，GPU0

map50：0.883，最好结果在238轮。

![1703337251144](image/实验记录/1703337251144.png)

##### 实验八

结果保存文件：代码包2exp3（训练日期：20231223）

yolov8-detr-p2-self，CIOU，ratio=1.5，batch=16，GPU0

map50：0.881，最好结果在264轮。

![1703384042195](image/实验记录/1703384042195.png)

### ~~BiFPN~~

~~结果保存文件：train21（日期：20231020）~~

~~300轮 ，228轮终止（早停：50轮）~~

~~map50：0.862，比baseline效果变差。~~

![1697865354581](image/实验记录/1697865354581.png)

![1697865359540](image/实验记录/1697865359540.png)

# 老版本YOLOv8n

## synthetic fire-smoke.v17i数据集

### baseline

#### 实验一

结果保存文件：train27（训练日期：20231223）

yolov8n，CIOU，batch=32，GPU0，默认超参default

map50：0.866，最好结果在177轮。

![1703429137145](image/实验记录/1703429137145.png)

测试集

![1703588126427](image/实验记录/1703588126427.png)

### small_object

结果保存文件：train12（日期：20230925）

300轮

map50：0.877，相较于无训练baseline提升1.1%。

![1695633708451](image/实验记录/1695633708451.png)

![1695633718515](image/实验记录/1695633718515.png)

### InnerCIOU

#### 实验一

结果保存文件：train28（训练日期：20231226）

yolov8n，CIOU，ratio=0.95，batch=32，GPU0，默认超参。

map50：0.875，最好结果在231轮。

![1703595482159](image/实验记录/1703595482159.png)

#### 实验二

结果保存文件：train50（训练日期：20240103）

yolov8n，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.874，最好结果在222轮。

![1704279994564](image/实验记录/1704279994564.png)

#### 实验三

结果保存文件：train56（训练日期：20240122）

yolov8n，CIOU，ratio=0.9，batch=32，GPU0，默认超参。

map50：0.875，最好结果在256轮。

![1705910725018](image/实验记录/1705910725018.png)

#### 实验四

结果保存文件：train58（训练日期：20240123）

yolov8n，CIOU，ratio=1.1，batch=32，GPU0，默认超参。

map50：0.872，最好结果在225轮。

![1705989782875](image/实验记录/1705989782875.png)

#### 实验五

结果保存文件：train59（训练日期：20240123）

yolov8n，CIOU，ratio=1.3，batch=32，GPU0，默认超参。

map50：0.869，最好结果在261轮。

![1705997493424](image/实验记录/1705997493424.png)

#### 实验六

结果保存文件：train60（训练日期：20240125）

yolov8n，CIOU，ratio=1.4，batch=32，GPU0，默认超参。

map50：0.869，最好结果在166轮。

![1706180914597](image/实验记录/1706180914597.png)

### DAttention

#### 实验一

结果保存文件：train33（训练日期：20231227）

DAttention.yaml，dwc_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.87，最好结果在215轮。

![1703668848848](image/实验记录/1703668848848.png)

#### 实验二

结果保存文件：train34（训练日期：20231227）

DAttention.yaml，log_cpb=True，CIOU，batch=32，GPU0，默认超参。

map50：0.871，最好结果在218轮。

![1703680078657](image/实验记录/1703680078657.png)

### C2f-DAttention

#### 实验一

结果保存文件：train35（训练日期：20231227）

C2f-DAttention.yaml，log_cpb=True，CIOU，batch=32，GPU0，默认超参。

map50：0.87，最好结果在259轮。

![1703691693242](image/实验记录/1703691693242.png)

#### 实验二

结果保存文件：train36（训练日期：20231228）

C2f-DAttention.yaml，dwc_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.872，最好结果在265轮。

![1703728763379](image/实验记录/1703728763379.png)

### small_object+inneriou

#### ~~实验一~~

~~结果保存文件：train29（训练日期：20231227）~~

~~small_Object_yolov8，CIOU，ratio=0.95，batch=32，GPU0，默认超参。~~

~~map50：0.875，最好结果在188轮。~~

![1703605334436](image/实验记录/1703605334436.png)

#### ~~实验二~~

~~结果保存文件：train30（训练日期：20231227）~~

~~small_Object_yolov8，CIOU，ratio=1.1，batch=32，GPU0，默认超参。~~

~~map50：0.876，最好结果在178轮。~~

![1703641130285](image/实验记录/1703641130285.png)

#### 实验三

结果保存文件：train31（训练日期：20231227）

small_Object_yolov8，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.877，最好结果在204轮。

![1703652092539](image/实验记录/1703652092539.png)

### DAttention+inneriou

#### ~~实验一~~

~~结果保存文件：train32（训练日期：20231227）~~

~~DAttention.yaml，CIOU，ratio=1.2，batch=32，GPU0，默认超参。~~

~~map50：0.872，最好结果在260轮。~~

![1703661395810](image/实验记录/1703661395810.png)

### small_object+C2f-DAttention

#### 实验一

结果保存文件：train37（训练日期：20231228）

small_Object+C2f-DAttention.yaml，dwc_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.883，最好结果在175轮。

![1703739378103](image/实验记录/1703739378103.png)

#### 实验二

结果保存文件：train38（训练日期：20231228）

small_Object+C2f-DAttention.yaml，log_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.884，最好结果在206轮。

![1703748254246](image/实验记录/1703748254246.png)

### InnerCIOU+small_object+C2f-DAttention

#### 实验一

结果保存文件：train39（训练日期：20231228）

small_Object+C2f-DAttention.yaml，log_cpb=True，CIOU，ratio=1.3，batch=32，GPU0，默认超参。

map50：0.88，最好结果在223轮。

![1703758490655](image/实验记录/1703758490655.png)

#### 实验二

结果保存文件：train40（训练日期：20231228）

small_Object+C2f-DAttention.yaml，log_cpb=True，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.884，最好结果在213轮。

![1703769875395](image/实验记录/1703769875395.png)

#### 实验三

结果保存文件：train41（训练日期：20231229）

small_Object+C2f-DAttention.yaml，log_cpb=True，CIOU，ratio=1.1，batch=32，GPU0，默认超参。

map50：0.883，最好结果在171轮。

![1703830706338](image/实验记录/1703830706338.png)

#### 实验四

结果保存文件：train44（训练日期：20231229）

small_Object+C2f-DAttention.yaml，dwc_pe=True，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.882，最好结果在214轮。

![1704168611779](image/实验记录/1704168611779.png)

#### 实验五

结果保存文件：train57（训练日期：20240122）

small_Object+C2f-DAttention.yaml，log_cpb=True，CIOU，ratio=0.9，batch=32，GPU0，默认超参。

map50：0.882，最好结果在192轮。

![1705985653672](image/实验记录/1705985653672.png)

### InnerDIOU+small_object+C2f-DAttention

#### 实验一

结果保存文件：train43（训练日期：20231229）

small_Object+C2f-DAttention.yaml，log_cpb=True，DIOU，ratio=1.1，batch=32，GPU0，默认超参。

map50：0.878，最好结果在188轮。

![1703853400226](image/实验记录/1703853400226.png)

### EIOU+small_object+C2f-DAttention

#### 实验一

结果保存文件：train45（训练日期：20240102）

small_Object+C2f-DAttention.yaml，log_cpb=True，EIOU，batch=32，GPU1，默认超参。

map50：0.885，最好结果在219轮。

![1704181152848](image/实验记录/1704181152848.png)

#### 实验二

结果保存文件：train47（训练日期：20240102）

small_Object+C2f-DAttention.yaml，log_cpb=True，EIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.878，最好结果在138轮。

![1704201983576](image/实验记录/1704201983576.png)

#### 实验三

结果保存文件：train48（训练日期：20240102）

small_Object+C2f-DAttention.yaml，log_cpb=True，EIOU，ratio=0.9，batch=32，GPU0，默认超参。

map50：0.881，最好结果在231轮。

![1704258314239](image/实验记录/1704258314239.png)

#### 实验四

结果保存文件：train49（训练日期：20240103）

small_Object+C2f-DAttention.yaml，log_cpb=True，EIOU，ratio=0.9，batch=32，GPU1，默认超参。

map50：0.884，最好结果在220轮。

![1704266987464](image/实验记录/1704266987464.png)

### SIOU+small_object+C2f-DAttention

#### 实验一

结果保存文件：train46（训练日期：20240102）

small_Object+C2f-DAttention.yaml，log_cpb=True，SIOU，batch=32，GPU1，默认超参。

map50：0.879，最好结果在170轮。

![1704191965211](image/实验记录/1704191965211.png)

### InnerCIOU+ASF-P2+c2f-DAttention

#### 实验一

结果保存文件：train51（训练日期：20240105）

ASF-P2+c2f-DAttention.yaml，log_cpb=True，CIOU，ratio=1.2，batch=32，GPU1，默认超参。

map50：0.881，最好结果在178轮。

![1704451971959](image/实验记录/1704451971959.png)

#### 实验二

结果保存文件：train52（训练日期：20240105）

ASF-P2+c2f-DAttention2.yaml，log_cpb=True，CIOU，ratio=1.2，batch=32，GPU1，默认超参。

map50：0.882，最好结果在151轮。

![1704464528007](image/实验记录/1704464528007.png)

#### 实验三

结果保存文件：train53（训练日期：20240105）

ASF-P2+c2f-DAttention2.yaml，log_cpb=True，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.879，最好结果在294轮。

![1704593740654](image/实验记录/1704593740654.png)

### small_object+C2f-DAttention+bi

跨层连接

![1703832412312](image/实验记录/1703832412312.png)

#### 实验一

结果保存文件：train42（训练日期：20231229）

small_Object+C2f-DAttention+bi.yaml，log_cpb=True，CIOU，batch=32，GPU0，默认超参。

map50：0.883，最好结果在206轮。

![1703839677991](image/实验记录/1703839677991.png)

### ContextAggregation+InnerCIOU+c2f-DAttention

#### 实验一

结果保存文件：train54（训练日期：20240115）

C2f-DAttention+ContextAggregation.yaml，log_cpb=True，CIOU，ratio=1.2，batch=32，GPU0，默认超参。

map50：0.882，最好结果在243轮。

![1705310062598](image/实验记录/1705310062598.png)

### small_object+C2f-DAttention+RTDETRDecoder

## Forest fire aerial dataset数据集

### baseline

结果保存文件：train（训练日期：20231228）

yolov8n，CIOU，batch=32，GPU0，默认超参default

map50：0.871，最好结果在265轮。

![1703777084199](image/实验记录/1703777084199.png)

### small_object+C2f-DAttention

#### 实验一

结果保存文件：train2（训练日期：20231229）

small_Object+C2f-DAttention.yaml，log_cpb=True，CIOU，batch=32，GPU0，默认超参。

map50：0.88，最好结果在203轮。

![1703813319438](image/实验记录/1703813319438.png)

#### 实验二

结果保存文件：train3（训练日期：20231229）

small_Object+C2f-DAttention.yaml，dwc_pe=True，CIOU，batch=32，GPU0，默认超参。

map50：0.878，最好结果在234轮。

![1703825151668](image/实验记录/1703825151668.png)

## 211104_didim.v1-none数据集

结果保存文件：代码包2train（训练日期：20231209）

map50：0.754（0.758）。收敛太慢，382轮才收敛。

![1702132446645](image/实验记录/1702132446645.png)

![1702132538782](image/实验记录/1702132538782.png)

## Fire And Smoke.v1-training-fire-and-smoke数据集

baseline

烟是0，火是1

## my_fire+synthetic数据集

### 无预训练baseline

结果保存文件：mAnds（日期：20231010）

300轮，204轮终止

map50：0.864

![1696903443684](image/实验记录/1696903443684.png)

![1696903798910](image/实验记录/1696903798910.png)

## my_fire数据集

### 无预训练baseline

结果保存文件：my_fire（日期：20231010）

300轮，274轮终止

map50：0.891

![1696916867861](image/实验记录/1696916867861.png)

![1696916961487](image/实验记录/1696916961487.png)

### small object

#### small object + Inner CIOU

##### 实验一

结果保存文件：代码包2train（训练日期：20231208）

ratio=0.95，tal中为CIOU，351轮终止。

map50：0.895

![1702046473186](image/实验记录/1702046473186.png)

## self_real_forest_detection数据集

## Smoke_Dataset_2数据集

### baseline

##### 实验一

结果保存文件：代码包3train（训练日期：20231209）

199轮终止。

map50：0.61

![1702122111553](image/实验记录/1702122111553.png)

## fire_and_smoke.v3i数据集

雪地无人机森林火灾检测

### 无预训练baseline

99%，无可改进空间，跟别的数据集结合效果也严重受到影响，建议直接放弃该数据集。

# YOLOv8s

## synthetic fire-smoke.v17i数据集

### 无预训练baseline

结果保存文件：train

map50：0.867

![1695207784436](image/实验记录/1695207784436.png)

无法收敛

![1695207840626](image/实验记录/1695207840626.png)

### 有预训练baseline

20230924

结果保存文件：train4

map50：0.862

![1695542138436](image/实验记录/1695542138436.png)

无法收敛

![1695542176327](image/实验记录/1695542176327.png)

### 8s(Augment)

20230924

结果保存文件：train5

map50：0.855，相较baseline降低0.7%

![1695552426941](image/实验记录/1695552426941.png)

无法收敛

![1695552520746](image/实验记录/1695552520746.png)

### GAM（无效试验）

20230924

结果保存文件：train6

map50：0.862

与有预训练的v8s结果一模一样，但第一遍模型输出打印时确实加了GAM层，有可能是yolov8s.pt加载后覆盖了修改后的模型。此次试验初步判定为无效试验。

![1695557593224](image/实验记录/1695557593224.png)

![1695557603308](image/实验记录/1695557603308.png)

### +GAM_Attention

结果保存文件：train1

map50：0.87，相较baseline提高0.3%

![1695347925706](image/实验记录/1695347925706.png)

可以收敛

![1695347955116](image/实验记录/1695347955116.png)

### +GAM（第二次试验）

20230924

结果保存文件：train7

map50：0.868

![1695564253972](image/实验记录/1695564253972.png)

![1695564265715](image/实验记录/1695564265715.png)

### small object

结果保存文件：train2

map50：0.875，相较baseline提高0.8%

![1695358157010](image/实验记录/1695358157010.png)

![1695358322114](image/实验记录/1695358322114.png)

改进后网络模型图：

![1695358539460](image/实验记录/1695358539460.png)

### small object + GAM_Attention

结果保存文件：train3

map50：0.88，相较baseline提高1.3%

![1695370965066](image/实验记录/1695370965066.png)

![1695371078574](image/实验记录/1695371078574.png)

# YOLOv5s

## synthetic fire-smoke.v17i数据集

### baseline

#### 实验一

结果保存文件：train（20231023）

map50：0.873

![1698060585174](image/实验记录/1698060585174.png)

![1698060594320](image/实验记录/1698060594320.png)

#### 实验二

结果保存文件：exp4（训练日期：20240114）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.867，最好结果在156轮。

![1705228788122](image/实验记录/1705228788122.png)

### lr0=0.1

结果保存文件：train1（20231023）

map50：0.885

![1698060651448](image/实验记录/1698060651448.png)

![1698060656754](image/实验记录/1698060656754.png)

### SimAM

结果保存文件：train1（20231023）

map50：0.883

比baseline降低0.2%。

![1698664858737](image/实验记录/1698664858737.png)

![1698664900959](image/实验记录/1698664900959.png)

# 论文实验

## 参数量记录

### yolov8

#### yolov8n

yolov8n.pt，参数量3.15$*10^6$，计算量8.7GFLOPs，权重文件6.2M，FPS：238.9。

![1705675671477](image/实验记录/1705675671477.png)

![1705676335249](image/实验记录/1705676335249.png)

#### C2f_DAttention + small_Object_yolov8

C2f_DAttention + small_Object_yolov8.pt，参数量3.04$*10^6$，计算量12.7GFLOPs，权重文件6.2M，FPS：76.6。

![1705676060208](image/实验记录/1705676060208.png)

![1705676512806](image/实验记录/1705676512806.png)

#### ~~yolov8n~~

~~yolov8n.yaml，参数量3.16$*10^6$，计算量8.9GFLOPs，权重文件6.3M。~~

#### ~~small_Object_yolov8~~

~~small_Object_yolov8.yaml，参数量3.41$*10^6$，计算量17.7GFLOP，权重文件6.3M。~~

#### yolov8s

结果保存文件：exp55（训练日期：20240122）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.865，最好结果在236轮。

yolov8s.yaml，参数量11.13 $*10^6$，计算量28.4GFLOPs，权重文件22.5M。

![1705906827645](image/实验记录/1705906827645.png)

### yolov5

#### yolov5s

结果保存文件：exp4（训练日期：20240114）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.867，最好结果在156轮。

yolov5s.yaml，参数量7.02$*10^6$，计算量15.8GFLOPs，权重文件14.4M。

![1705229044599](image/实验记录/1705229044599.png)

![1705234903853](image/实验记录/1705234903853.png)

#### yolov5n

结果保存文件：exp5（训练日期：20240114）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.868，最好结果在轮。

yolov5n.yaml，参数量1.76 $*10^6$，计算量4.1GFLOPs，权重文件3.8M。

![1705294905458](image/实验记录/1705294905458.png)

![1705234913548](image/实验记录/1705234913548.png)

### YOLOv7-tiny

结果保存文件：exp（训练日期：20240123）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.875。

yolov7-tiny.yaml，参数量6.01 $*10^6$，计算量13GFLOPs，权重文件12.3M。

![1706012792384](image/实验记录/1706012792384.png)

### YOLOv3-tiny

结果保存文件：train61（训练日期：20240126）

无预训练权重，batch=32，GPU0，默认超参。

map50：0.802

yolov3-tiny.yaml，参数量12.13 $*10^6$，计算量18.9GFLOPs，权重文件24.4M。

![1706332899919](image/实验记录/1706332899919.png)

### Faster RCNN


### RTDETR

训练时结果保存文件：exp10（训练日期：20240127）

rtdetr-r18，GIOU，batch=32，GPU0

map50：，最好结果在轮。
