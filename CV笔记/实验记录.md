# v5s训练myfiredataset数据集

## yolov5

### v5s baseline

exp40

![1690616532965](image/实验记录/1690616532965.png)![1690616542817](image/实验记录/1690616542817.png)

### 加注意力机制

#### s+CoordAtt

map50提升0.8%（exp41）

200轮后过拟合

![1690616645033](image/实验记录/1690616645033.png)

![1690616657789](image/实验记录/1690616657789.png)

### 改IOU

#### EIoU

map50提升0.2%（exp48）

![1690892343926](image/实验记录/1690892343926.png)

![1690892340073](image/实验记录/1690892340073.png)

#### WIoU

map50提升0.4%（exp51）

200轮后过拟合

![1690892565506](image/实验记录/1690892565506.png)

![1690892582545](image/实验记录/1690892582545.png)

### 改Head

#### GFPN替换Head

map50提升0.5%（exp54）

200轮后过拟合

![1691071210101](image/实验记录/1691071210101.png)

![1691071295943](image/实验记录/1691071295943.png)

### 改残差

#### C2f

map50提升0.3%（exp55）

收敛正常

![1691212480851](image/实验记录/1691212480851.png)

![1691212492557](image/实验记录/1691212492557.png)

# YOLOv8n

## synthetic fire-smoke.v17i数据集

### 有预训练baseline

20230925

结果保存文件：train9

map50：0.86，相较于无预训练降低了0.6%

![1695605938016](image/实验记录/1695605938016.png)

无法收敛

![1695605998994](image/实验记录/1695605998994.png)

### 无预训练baseline

网络模型图：

20230925

结果保存文件：train8

map50：0.866，相较于有预训练提升了0.6%。

![1695606080150](image/实验记录/1695606080150.png)

收敛

![1695606091152](image/实验记录/1695606091152.png)

![1695358478991](https://file+.vscode-resource.vscode-cdn.net/d%3A/code/%E7%AC%94%E8%AE%B0/CV%E7%AC%94%E8%AE%B0/image/%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/1695358478991.png)

### +GAM_Attention

![1695358539460](https://file+.vscode-resource.vscode-cdn.net/d%3A/code/%E7%AC%94%E8%AE%B0/CV%E7%AC%94%E8%AE%B0/image/%E5%AE%9E%E9%AA%8C%E8%AE%B0%E5%BD%95/1695358539460.png)

#### 第一次实验

结果保存文件：train10（日期：20230925）

200轮

map50：0.868，相较于有训练baseline提升0.8%，相较于无训练baseline提升0.2%。

![1695611915466](image/实验记录/1695611915466.png)

![1695612076057](image/实验记录/1695612076057.png)

#### 第二次实验

结果保存文件：train11（日期：20230925）

300轮

map50：0.868，与第一次实验总map50相同，fire的map50有0.5%提升，smoke的map50有0.3%下降，相较于有训练baseline提升0.8%，相较于无训练baseline提升0.2%。

![1695617395940](image/实验记录/1695617395940.png)

### small object

结果保存文件：train12（日期：20230925）

300轮

map50：0.877，相较于有训练baseline提升1.7%，相较于无训练baseline提升1.1%。

![1695633708451](image/实验记录/1695633708451.png)

![1695633718515](image/实验记录/1695633718515.png)

#### small object + augment

结果保存文件：train22（日期：20231020）

300轮，221轮终止

map50：0.874，相较于单独small object 降低 0.3%。

![1697809657918](image/实验记录/1697809657918.png)

![1697809683681](image/实验记录/1697809683681.png)

#### small object + GAM_Attention

结果保存文件：train13（日期：20230925）

300轮

map50：0.872，相较于有训练baseline提升1.2%，相较于无训练baseline提升0.6%，相较于单独的small object 降低0.5%。因而small object网络与GAM结合有负面影响。

![1695650584527](image/实验记录/1695650584527.png)

![1695650598938](image/实验记录/1695650598938.png)

#### small object + WIoU

结果保存文件：train14（日期：20230926）

300轮，187轮终止

map50：0.876，相较于有训练baseline提升1.6%，相较于无训练baseline提升1.0%，相较于单独的small object 降低0.1%。因而small object网络与GAM结合有负面影响。

![1695693157793](image/实验记录/1695693157793.png)

![1695693420194](image/实验记录/1695693420194.png)

#### small object + Inner CIOU

结果保存文件：代码包2train13（训练日期：20231207）

ratio=1.1，tal中为CIOU，180轮终止。

map50：0.884，相较于无训练baseline提高1.8%。

![1701950168865](image/实验记录/1701950168865.png)

### IOU

#### WIoU

结果保存文件：train15（日期：20230926）

300轮，tal中为CIOU（不能同时在loss和tal两个地方同时用WIOU）

map50：0.87，相较于有训练baseline提升1.0%，相较于无训练baseline提升0.4%。

![1695737685191](image/实验记录/1695737685191.png)

![1695737699314](image/实验记录/1695737699314.png)

#### EIOU

##### 第一次实验

结果保存文件：train16（日期：20230927）

300轮，tal中为CIOU

map50：0.866，相较于有训练baseline提升0.6%，相较于无训练baseline无提升。

![1695791174498](image/实验记录/1695791174498.png)

![1695791451639](image/实验记录/1695791451639.png)

##### 第二次实验

结果保存文件：train19（日期：20231002）

300轮，tal中为EIOU

map50：0.863，实验无意义。

![1696256355392](image/实验记录/1696256355392.png)

![1696256378163](image/实验记录/1696256378163.png)

#### SIOU

##### 第一次实验

结果保存文件：train18（日期：20230928）

300轮 ，tal中为CIOU

map50：0.864，相较于第一次实验fire的map提升1.3%，smoke降低1.4%。

![1695884824570](image/实验记录/1695884824570.png)

##### 第二次实验

结果保存文件：train17（日期：20230928）

300轮 ，tal中也为SIOU

map50：0.865，相较于有训练baseline提升0.5%，相较于无训练baseline降低0.1%。

![1695866728949](image/实验记录/1695866728949.png)

![1695866897909](image/实验记录/1695866897909.png)

#### GIOU

|            |   GIOU   | InnerGIOU(1.15) | InnerGIOU(1.1) | InnerGIOU(1.2) | InnerGIOU(1.25) |
| :--------: | :------: | :-------------: | :------------: | :------------: | :-------------: |
|   map50   |  0.872  |      0.871      |     0.868     |      0.87      |      0.866      |
|    tal    |   CIOU   |      GIOU      |      CIOU      |      CIOU      |      CIOU      |
| epoch(50p) |   244   |       246       |      257      |      231      |       230       |
|    save    | train21 |  代码包2train  | 代码包2train3 | 代码包2train4 |  代码包2train5  |
|    date    | 20231003 |    20231124    |    20231125    |    20231126    |    20231126    |

结果保存文件：train21（日期：20231003）

244轮 ，tal中为CIOU

map50：0.872，相较于有训练baseline提升1.2%，相较于无训练baseline提高0.6%。

![1696331005006](image/实验记录/1696331005006.png)

![1696331013759](image/实验记录/1696331013759.png)

#### Inner GIOU

##### 实验一

结果保存文件：代码包2train（训练日期：20231124）

ratio=1.15，tal中为GIOU，246轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1700902327230](image/实验记录/1700902327230.png)

![1700901664756](image/实验记录/1700901664756.png)

##### 实验二

结果保存文件：代码包2train2（训练日期：20231125）

ratio=1.15，tal中为CIOU，214轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1700910303177](image/实验记录/1700910303177.png)

![1700910370063](image/实验记录/1700910370063.png)

##### 实验三

结果保存文件：代码包2train3（训练日期：20231125）

ratio=1.1，tal中为CIOU，257轮终止

map50：0.868，相较于无训练baseline提高0.2%。

![1700965278354](image/实验记录/1700965278354.png)

![1700966054064](image/实验记录/1700966054064.png)

##### 实验四

结果保存文件：代码包2train4（训练日期：20231126）

ratio=1.2，tal中为CIOU，231轮终止

map50：0.87，相较于无训练baseline提高0.4%。

![1700979700165](image/实验记录/1700979700165.png)

![1700979764662](image/实验记录/1700979764662.png)

##### 实验五

结果保存文件：代码包2train5（训练日期：20231126）

ratio=1.25，tal中为CIOU，230轮终止

map50：0.866，相较于无训练baseline无提高。

![1700989753052](image/实验记录/1700989753052.png)

略

#### DIOU

|            |   DIOU   | InnerDIOU(1.15) | InnerDIOU(1.2) | InnerDIOU(1.25) | InnerDIOU(1.1) | InnerDIOU(1.05) |
| :--------: | :------: | :-------------: | :------------: | :-------------: | -------------- | --------------- |
|   map50   |  0.869  |      0.871      |     0.866     |      0.868      | 0.872          | 0.868           |
|    tal    |   DIOU   |      DIOU      |      DIOU      |      DIOU      | DIOU           | DIOU            |
| epoch(50p) |   207   |       230       |      277      |       235       | 286            | 250             |
|    save    | train20 |  代码包2train6  | 代码包2train9 |  代码包2train7  | 代码包2train10 | 代码包2train8   |
|    date    | 20231003 |    20231127    |    20231127    |    20231127    | 20231127       | 20231127        |

结果保存文件：train20（日期：20231003）

207轮 ，tal中为CIOU

map50：0.869，相较于有训练baseline提升0.9%，相较于无训练baseline提高0.3%。

![1696298900044](image/实验记录/1696298900044.png)

![1696298915982](image/实验记录/1696298915982.png)

#### Inner DIOU

##### 实验一

结果保存文件：代码包2train6（训练日期：20231127）

ratio=1.15，tal中为DIOU，230轮终止

map50：0.871，相较于无训练baseline提高0.5%。

![1701052781111](image/实验记录/1701052781111.png)

略

##### 实验二

![1701068327825](image/实验记录/1701068327825.png)

略

##### 实验三

结果保存文件：代码包2train7（训练日期：20231127）

ratio=1.25，tal中为DIOU，235轮终止。

map50：0.868，相较于无训练baseline提高0.2%。

![1701056009257](image/实验记录/1701056009257.png)

略

##### 实验四

结果保存文件：代码包2train10（训练日期：20231127）

ratio=1.1，tal中为DIOU，286轮终止

map50：0.872，相较于无训练baseline提高0.6%。

![1701155195249](image/实验记录/1701155195249.png)

略

##### 实验五

结果保存文件：代码包2train8（训练日期：20231127）

ratio=1.05，tal中为DIOU，250轮终止。

map50：0.868，相较于无训练baseline提高0.2%。

![1701059154093](image/实验记录/1701059154093.png)

略

#### Inner CIOU

|            |  CIOU  | InnerCIOU(1.15) | InnerDIOU(1.2) | InnerDIOU(1.25) | InnerDIOU(1.1) | InnerDIOU(1.05) |
| :--------: | :----: | :-------------: | :------------: | :-------------: | -------------- | --------------- |
|   map50   | 0.866 |      0.874      |     0.872     |                | 0.874          | 0.868           |
|    tal    |  CIOU  |      CIOU      |      CIOU      |      CIOU      | CIOU           | CIOU            |
| epoch(50p) |  缺失  |       275       |      181      |                | 254            | 250             |
|    save    | train8 |  代码包3train2  | 代码包3train3 |                | 代码包2train12 | 代码包2train8   |
|    date    |  基线  |    20231206    |    20231207    |                | 20231207       | 20231127        |

##### 实验一

结果保存文件：代码包2train11（训练日期：20231206）

ratio=1.15，tal中为CIOU，275轮终止。

map50：0.874，相较于无训练baseline提高0.8%。

代码包3train2(最好)

![1701868284336](image/实验记录/1701868284336.png)

代码包2train11（一般情况）

![1701868320285](image/实验记录/1701868320285.png)

##### 实验二

结果保存文件：代码包3train3（训练日期：20231207）

ratio=1.2，tal中为，181轮终止。

map50：0.872，相较于无训练baseline提高0.6%。

![1701929207067](image/实验记录/1701929207067.png)

##### 实验三

结果保存文件：代码包2train12（训练日期：20231207）

ratio=1.1，tal中为CIOU，轮终止。

map50：，相较于无训练baseline提高%。

![1701934734266](image/实验记录/1701934734266.png)


### BiFPN

结果保存文件：train21（日期：20231020）

300轮 ，228轮终止（早停：50轮）

map50：0.862，比baseline效果变差。

![1697865354581](image/实验记录/1697865354581.png)

![1697865359540](image/实验记录/1697865359540.png)

## my_fire+synthetic数据集

### 无预训练baseline

结果保存文件：mAnds（日期：20231010）

300轮，204轮终止

map50：0.864

![1696903443684](image/实验记录/1696903443684.png)

![1696903798910](image/实验记录/1696903798910.png)

## my_fire数据集

### 无预训练baseline

结果保存文件：my_fire（日期：20231010）

300轮，274轮终止

map50：0.891

![1696916867861](image/实验记录/1696916867861.png)

![1696916961487](image/实验记录/1696916961487.png)

# YOLOv8s

## synthetic fire-smoke.v17i数据集

### 无预训练baseline

结果保存文件：train

map50：0.867

![1695207784436](image/实验记录/1695207784436.png)

无法收敛

![1695207840626](image/实验记录/1695207840626.png)

### 有预训练baseline

20230924

结果保存文件：train4

map50：0.862

![1695542138436](image/实验记录/1695542138436.png)

无法收敛

![1695542176327](image/实验记录/1695542176327.png)

### 8s(Augment)

20230924

结果保存文件：train5

map50：0.855，相较baseline降低0.7%

![1695552426941](image/实验记录/1695552426941.png)

无法收敛

![1695552520746](image/实验记录/1695552520746.png)

### GAM（无效试验）

20230924

结果保存文件：train6

map50：0.862

与有预训练的v8s结果一模一样，但第一遍模型输出打印时确实加了GAM层，有可能是yolov8s.pt加载后覆盖了修改后的模型。此次试验初步判定为无效试验。

![1695557593224](image/实验记录/1695557593224.png)

![1695557603308](image/实验记录/1695557603308.png)

### +GAM_Attention

结果保存文件：train1

map50：0.87，相较baseline提高0.3%

![1695347925706](image/实验记录/1695347925706.png)

可以收敛

![1695347955116](image/实验记录/1695347955116.png)

### +GAM（第二次试验）

20230924

结果保存文件：train7

map50：0.868

![1695564253972](image/实验记录/1695564253972.png)

![1695564265715](image/实验记录/1695564265715.png)

### small object

结果保存文件：train2

map50：0.875，相较baseline提高0.8%

![1695358157010](image/实验记录/1695358157010.png)

![1695358322114](image/实验记录/1695358322114.png)

改进后网络模型图：

![1695358539460](image/实验记录/1695358539460.png)

### small object + GAM_Attention

结果保存文件：train3

map50：0.88，相较baseline提高1.3%

![1695370965066](image/实验记录/1695370965066.png)

![1695371078574](image/实验记录/1695371078574.png)

# YOLOv5s

## synthetic fire-smoke.v17i数据集

### baseline

结果保存文件：train（20231023）

map50：0.873

![1698060585174](image/实验记录/1698060585174.png)

过拟合

![1698060594320](image/实验记录/1698060594320.png)

### lr0=0.1

结果保存文件：train1（20231023）

map50：0.885

![1698060651448](image/实验记录/1698060651448.png)

![1698060656754](image/实验记录/1698060656754.png)

### SimAM

结果保存文件：train1（20231023）

map50：0.883

比baseline降低0.2%。

![1698664858737](image/实验记录/1698664858737.png)

![1698664900959](image/实验记录/1698664900959.png)
